{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACXC,OAAQC,SAASC,cAAc,SAC/BC,WAAYF,SAASC,cAAc,kBACnCE,UAAWH,SAASC,cAAc,iBAClCG,YAAaJ,SAASC,cAAc,oBAGhCI,EAAgB,CACpBC,cAAc,EACdC,SAAS,EACTC,SAAU,aACVC,MAAO,QACPC,SAAU,OACVC,SAAU,OACVC,QAAS,KASX,SAASC,EAAcL,EAAUM,GAC/B,IAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACvBL,EACFI,EAAQ,CAAEX,WAAUM,UAEpBM,EAAO,CAAEZ,WAAUM,aA6CzB,SAASO,EAAab,EAAUM,GAC9BQ,EAAA1B,GAAS2B,OAAOC,QACd,uBAAwCC,OAAfjB,EAAS,QAAYiB,OAANX,EAAM,MAC5CT,GAIN,SAASqB,EAAalB,EAAUM,GAC9BQ,EAAA1B,GAAS2B,OAAOI,QACd,sBAAqCF,OAAfjB,EAAS,QAAYiB,OAANX,EAAM,MAC3CT,GAnEJP,EAAKC,OAAO6B,iBAAiB,UAAU,SAAUC,GAC/CA,EAAEC,iBACF,IAeoBC,EAChBC,EACAC,EACAC,EAlBEC,EAAmBC,OAAOtC,EAAKM,YAAYiC,OAe7BN,EAdPI,EAeTH,EAAW,EACXC,EAAQG,OAAOtC,EAAKI,WAAWmC,OAC/BH,EAAaI,aAAY,WAC3BzB,EAAcmB,EAAUC,GACrBM,MAAK,SAAAC,GACJnB,EADemB,EAARhC,SAAegC,EAAL1B,UAGlB2B,OAAM,SAAAD,GACLd,EADgBc,EAARhC,SAAegC,EAAL1B,UAItBiB,GAAU,EAGO,KAFjBC,GAAY,KAGVU,cAAcR,GACdA,EAAaI,aAAY,WACvBzB,EAAcmB,EAAUC,GACrBM,MAAK,SAAAC,GACJnB,EADemB,EAARhC,SAAegC,EAAL1B,UAGlB2B,OAAM,SAAAD,GACLd,EADgBc,EAARhC,SAAegC,EAAL1B,UAItBiB,GAAU,EACVC,GAAY,EAEZC,GAASG,OAAOtC,EAAKK,UAAUkC,OAChB,IAAXN,GACFW,cAAcR,KAEfE,OAAOtC,EAAKK,UAAUkC,SAG3BJ,GAASG,OAAOtC,EAAKK,UAAUkC,SAC9BJ,M","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  firstDelay: document.querySelector('[name=\"delay\"]'),\n  stepDelay: document.querySelector('[name=\"step\"]'),\n  amountDelay: document.querySelector('[name=\"amount\"]'),\n};\n\nconst alertSettings = {\n  clickToClose: true,\n  useIcon: false,\n  position: 'center-top',\n  width: '380px',\n  distance: '20px',\n  fontSize: '20px',\n  timeout: 3000,\n};\n\nrefs.formEl.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const amountOfPromises = Number(refs.amountDelay.value);\n  showPromises(amountOfPromises);\n});\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n\nfunction showPromises(amount) {\n  let position = 1;\n  let delay = Number(refs.firstDelay.value);\n  let intervalId = setInterval(() => {\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        successAlert(position, delay);\n      })\n      .catch(({ position, delay }) => {\n        failureAlurt(position, delay);\n      });\n\n    amount -= 1;\n    position += 1;\n\n    if (position === 2) {\n      clearInterval(intervalId);\n      intervalId = setInterval(() => {\n        createPromise(position, delay)\n          .then(({ position, delay }) => {\n            successAlert(position, delay);\n          })\n          .catch(({ position, delay }) => {\n            failureAlurt(position, delay);\n          });\n\n        amount -= 1;\n        position += 1;\n\n        delay += Number(refs.stepDelay.value);\n        if (amount === 0) {\n          clearInterval(intervalId);\n        }\n      }, Number(refs.stepDelay.value));\n    }\n\n    delay += Number(refs.stepDelay.value);\n  }, delay);\n}\n\nfunction successAlert(position, delay) {\n  Notiflix.Notify.success(\n    `✅ Fulfilled promise ${position} in ${delay}ms`,\n    alertSettings\n  );\n}\n\nfunction failureAlurt(position, delay) {\n  Notiflix.Notify.failure(\n    `❌ Rejected promise ${position} in ${delay}ms`,\n    alertSettings\n  );\n}\n"],"names":["$iU1Pc","parcelRequire","$ce04d3a99e08e73b$var$refs","formEl","document","querySelector","firstDelay","stepDelay","amountDelay","$ce04d3a99e08e73b$var$alertSettings","clickToClose","useIcon","position","width","distance","fontSize","timeout","$ce04d3a99e08e73b$var$createPromise","delay","shouldResolve","Math","random","Promise","resolve","reject","$ce04d3a99e08e73b$var$successAlert","$parcel$interopDefault","Notify","success","concat","$ce04d3a99e08e73b$var$failureAlurt","failure","addEventListener","e","preventDefault","amount","position1","delay1","intervalId","amountOfPromises","Number","value","setInterval","then","param","catch","clearInterval"],"version":3,"file":"03-promises.a586ea61.js.map"}