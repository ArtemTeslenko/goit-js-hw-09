{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACXC,OAAQC,SAASC,cAAc,SAC/BC,WAAYF,SAASC,cAAc,kBACnCE,UAAWH,SAASC,cAAc,iBAClCG,YAAaJ,SAASC,cAAc,oBAGhCI,EAAgB,CACpBC,cAAc,EACdC,SAAS,EACTC,SAAU,aACVC,MAAO,QACPC,SAAU,OACVC,SAAU,OACVC,QAAS,KASX,SAASC,EAAcL,EAAUM,GAC/B,MAAMC,EAAgBC,KAAKC,SAAW,GACtC,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACvBL,EACFI,EAAQ,C,SAAEX,E,MAAUM,IAEpBM,EAAO,C,SAAEZ,E,MAAUM,OA6CzB,SAASO,EAAab,EAAUM,GAC9BQ,EAAA1B,GAAS2B,OAAOC,QACd,uBAAqBhB,QAAiBM,MAAWT,GAKrD,SAASoB,EAAajB,EAAUM,GAC9BQ,EAAA1B,GAAS2B,OAAOG,QACd,sBAAoBlB,QAAeM,MAAWT,GAlElDP,EAAKC,OAAO4B,iBAAiB,UAAU,SAAUC,GAC/CA,EAAEC,kBAgBJ,SAAsBC,GACpB,IAAIC,EAAW,EACXC,EAAQC,OAAOnC,EAAKI,WAAWgC,OAC/BC,EAAaC,aAAY,KAC3BvB,EAAckB,EAAUC,GACrBK,MAAK,EAAC7B,SAAEA,EAAQM,MAAEA,MACjBO,EAAab,EAAUM,MAExBwB,OAAM,EAAC9B,SAAEA,EAAQM,MAAEA,MAClBW,EAAajB,EAAUM,MAG3BgB,GAAU,EACVC,GAAY,EAEK,IAAbA,IACFQ,cAAcJ,GACdA,EAAaC,aAAY,KACvBvB,EAAckB,EAAUC,GACrBK,MAAK,EAAC7B,SAAEA,EAAQM,MAAEA,MACjBO,EAAab,EAAUM,MAExBwB,OAAM,EAAC9B,SAAEA,EAAQM,MAAEA,MAClBW,EAAajB,EAAUM,MAG3BgB,GAAU,EACVC,GAAY,EAEZC,GAASC,OAAOnC,EAAKK,UAAU+B,OAChB,IAAXJ,GACFS,cAAcJ,KAEfF,OAAOnC,EAAKK,UAAU+B,SAG3BF,GAASC,OAAOnC,EAAKK,UAAU+B,SAC9BF,GAnDHQ,CADyBP,OAAOnC,EAAKM,YAAY8B","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst refs = {\n  formEl: document.querySelector('.form'),\n  firstDelay: document.querySelector('[name=\"delay\"]'),\n  stepDelay: document.querySelector('[name=\"step\"]'),\n  amountDelay: document.querySelector('[name=\"amount\"]'),\n};\n\nconst alertSettings = {\n  clickToClose: true,\n  useIcon: false,\n  position: 'center-top',\n  width: '380px',\n  distance: '20px',\n  fontSize: '20px',\n  timeout: 3000,\n};\n\nrefs.formEl.addEventListener('submit', function (e) {\n  e.preventDefault();\n  const amountOfPromises = Number(refs.amountDelay.value);\n  showPromises(amountOfPromises);\n});\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  return new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n\nfunction showPromises(amount) {\n  let position = 1;\n  let delay = Number(refs.firstDelay.value);\n  let intervalId = setInterval(() => {\n    createPromise(position, delay)\n      .then(({ position, delay }) => {\n        successAlert(position, delay);\n      })\n      .catch(({ position, delay }) => {\n        failureAlurt(position, delay);\n      });\n\n    amount -= 1;\n    position += 1;\n\n    if (position === 2) {\n      clearInterval(intervalId);\n      intervalId = setInterval(() => {\n        createPromise(position, delay)\n          .then(({ position, delay }) => {\n            successAlert(position, delay);\n          })\n          .catch(({ position, delay }) => {\n            failureAlurt(position, delay);\n          });\n\n        amount -= 1;\n        position += 1;\n\n        delay += Number(refs.stepDelay.value);\n        if (amount === 0) {\n          clearInterval(intervalId);\n        }\n      }, Number(refs.stepDelay.value));\n    }\n\n    delay += Number(refs.stepDelay.value);\n  }, delay);\n}\n\nfunction successAlert(position, delay) {\n  Notiflix.Notify.success(\n    `✅ Fulfilled promise ${position} in ${delay}ms`,\n    alertSettings\n  );\n}\n\nfunction failureAlurt(position, delay) {\n  Notiflix.Notify.failure(\n    `❌ Rejected promise ${position} in ${delay}ms`,\n    alertSettings\n  );\n}\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$refs","formEl","document","querySelector","firstDelay","stepDelay","amountDelay","$47d4ff9957288465$var$alertSettings","clickToClose","useIcon","position","width","distance","fontSize","timeout","$47d4ff9957288465$var$createPromise","delay","shouldResolve","Math","random","Promise","resolve","reject","$47d4ff9957288465$var$successAlert","$parcel$interopDefault","Notify","success","$47d4ff9957288465$var$failureAlurt","failure","addEventListener","e","preventDefault","amount","position1","delay1","Number","value","intervalId","setInterval","then","catch","clearInterval","$47d4ff9957288465$var$showPromises"],"version":3,"file":"03-promises.d33aaf29.js.map"}